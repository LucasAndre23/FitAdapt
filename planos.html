<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FitAdapt - Planos de Assinatura</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@600;700&family=Open+Sans:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header class="user-header">
    <a href="index.html" class="logo">FitAdapt</a>
         <div class="user-info">
     <span>Olá, <strong id="user-nome"></strong></span>
    <a href="perfil.html" class="user-avatar-link">
    <div class="user-avatar" id="user-avatar-char">U</div>
    </a>
     <button id="logout-button" class="cta-button small-button">Sair</button>
    </div>
     </header>

    <section class="planos-section">
     <h2>Escolha seu Plano</h2>
    <p class="subtitle">Encontre o plano perfeito para suas necessidades e comece sua jornada FitAdapt.</p>
    <div class="planos-container">
    <div class="plano-card destaque" data-plano="trimestral">
     <h3>Plano Trimestral</h3>
     <p class="preco">R$ 149,90</p>
     <p>Por 3 meses</p>
     <ul>
     <li>Acesso completo aos treinos</li>
     <li>Planos personalizados</li>
                    <li>Suporte via WhatsApp</li>
    </ul>
                <button class="cta-button assinar-button">Assinar</button>
            </div>
     <div class="plano-card" data-plano="mensal">
                <h3>Plano Mensal</h3>
                <p class="preco">R$ 59,90</p>
                <p>Por mês</p>
                <ul>
                    <li>Acesso completo aos treinos</li>
                    <li>Planos personalizados</li>
                </ul>
                <button class="cta-button assinar-button">Assinar</button>
            </div>
        </div>
    </section>

    <footer>
        <p>© 2025 FitAdapt - Todos os direitos reservados</p>
        <p>contato@fitadapt.com.br | (55) 83 9999-9999 </p>
    </footer>

    <script type="module">
        import { auth } from './firebase-init.js';
        import { onAuthStateChanged, signOut } from 'https://www.gstatic.com/firebasejs/11.9.0/firebase-auth.js';

        onAuthStateChanged(auth, (user) => {
            const userNameElement = document.getElementById('user-nome');
            const userAvatarCharElement = document.getElementById('user-avatar-char');
            if (user) {
                const userName = user.displayName || (user.email ? user.email.split('@')[0] : 'Usuário');
                if (userNameElement) {
                    userNameElement.textContent = userName;
                }
                if (userAvatarCharElement) {
                    userAvatarCharElement.textContent = userName.charAt(0).toUpperCase();
                }
            } else {
                window.location.href = 'login.html';
            }
        });

        document.addEventListener('DOMContentLoaded', () => {
            const assinarButtons = document.querySelectorAll('.assinar-button');
            assinarButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const plano = button.closest('.plano-card').getAttribute('data-plano');
                    localStorage.setItem('selectedPlan', plano);
                    
                    // Redireciona o usuário para a loja virtual Nuvemshop para o pagamento.
                    window.location.href = 'https://fitadapt3.lojavirtualnuvem.com.br/';
                });
            });

            const logoutButton = document.getElementById('logout-button');
            if (logoutButton) {
                logoutButton.addEventListener('click', async () => {
                    try {
                        await signOut(auth);
                        window.location.href = 'login.html';
                     } catch (error) {
                       console.error('Erro de logout:', error);
                    }
                });
            }
        });
    </script>
</body>
</html>
